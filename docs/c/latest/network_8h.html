<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.19"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>stumpless: target/network.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">stumpless
   &#160;<span id="projectnumber">2.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1bbcb9615bce09de8292fb64e7b04403.html">target</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">network.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;<a class="el" href="config_8h_source.html">stumpless/config.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="target_8h_source.html">stumpless/target.h</a>&gt;</code><br />
</div>
<p><a href="network_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9cfd99b618e5ad004238bc53312fa99f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="network_8h.html#a9cfd99b618e5ad004238bc53312fa99f">STUMPLESS_DEFAULT_TRANSPORT_PORT</a>&#160;&#160;&#160;&quot;514&quot;</td></tr>
<tr class="memdesc:a9cfd99b618e5ad004238bc53312fa99f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The default transport port for network targets.  <a href="network_8h.html#a9cfd99b618e5ad004238bc53312fa99f">More...</a><br /></td></tr>
<tr class="separator:a9cfd99b618e5ad004238bc53312fa99f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35bad08139ade7d69c5d8478f873dfe0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="network_8h.html#a35bad08139ade7d69c5d8478f873dfe0">STUMPLESS_DEFAULT_UDP_MAX_MESSAGE_SIZE</a>&#160;&#160;&#160;1472</td></tr>
<tr class="memdesc:a35bad08139ade7d69c5d8478f873dfe0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The default message size for UDP network targets.  <a href="network_8h.html#a35bad08139ade7d69c5d8478f873dfe0">More...</a><br /></td></tr>
<tr class="separator:a35bad08139ade7d69c5d8478f873dfe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aac7323b660364d807b15ec5f77c634d5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="network_8h.html#aac7323b660364d807b15ec5f77c634d5">stumpless_network_protocol</a> { <a class="el" href="network_8h.html#aac7323b660364d807b15ec5f77c634d5abda7df19a6350479796ad58f3089ff98">STUMPLESS_IPV4_NETWORK_PROTOCOL</a>, 
<a class="el" href="network_8h.html#aac7323b660364d807b15ec5f77c634d5a41aae8b58394254233524a216bcad168">STUMPLESS_IPV6_NETWORK_PROTOCOL</a>
 }</td></tr>
<tr class="memdesc:aac7323b660364d807b15ec5f77c634d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Network protocols used by a network target.  <a href="network_8h.html#aac7323b660364d807b15ec5f77c634d5">More...</a><br /></td></tr>
<tr class="separator:aac7323b660364d807b15ec5f77c634d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1929406669805344dbc128bad24455c5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="network_8h.html#a1929406669805344dbc128bad24455c5">stumpless_transport_protocol</a> { <a class="el" href="network_8h.html#a1929406669805344dbc128bad24455c5ab7fcb1873a89fde5c42f21e245bc6a73">STUMPLESS_TCP_TRANSPORT_PROTOCOL</a>, 
<a class="el" href="network_8h.html#a1929406669805344dbc128bad24455c5a1c8c77b76b6fbe8af878db07295e983d">STUMPLESS_UDP_TRANSPORT_PROTOCOL</a>
 }</td></tr>
<tr class="memdesc:a1929406669805344dbc128bad24455c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transport protocols used by a network target.  <a href="network_8h.html#a1929406669805344dbc128bad24455c5">More...</a><br /></td></tr>
<tr class="separator:a1929406669805344dbc128bad24455c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5f06b9d0d975b7b42d98d243b9ca2883"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="network_8h.html#a5f06b9d0d975b7b42d98d243b9ca2883">__attribute__</a> ((visibility(&quot;default&quot;))) void stumpless_close_network_target(const struct <a class="el" href="structstumpless__target.html">stumpless_target</a> *target)</td></tr>
<tr class="memdesc:a5f06b9d0d975b7b42d98d243b9ca2883"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes a network target.  <a href="network_8h.html#a5f06b9d0d975b7b42d98d243b9ca2883">More...</a><br /></td></tr>
<tr class="separator:a5f06b9d0d975b7b42d98d243b9ca2883"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab0336df654a1920185f82879e510fc18"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="network_8h.html#aac7323b660364d807b15ec5f77c634d5">stumpless_network_protocol</a> network enum <a class="el" href="network_8h.html#a1929406669805344dbc128bad24455c5">stumpless_transport_protocol</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="network_8h.html#ab0336df654a1920185f82879e510fc18">transport</a></td></tr>
<tr class="separator:ab0336df654a1920185f82879e510fc18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85ec2713f151aae36f5bb52e65bac06d"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="network_8h.html#a85ec2713f151aae36f5bb52e65bac06d">destination</a></td></tr>
<tr class="separator:a85ec2713f151aae36f5bb52e65bac06d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad723da1801ae1586eb330380e2d9a912"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="network_8h.html#ad723da1801ae1586eb330380e2d9a912">port</a></td></tr>
<tr class="separator:ad723da1801ae1586eb330380e2d9a912"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74403aafe429b20525b2c1798971d2e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="memory_8h.html#a1de1ad716e56455dd12745e3f014b642">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="network_8h.html#a74403aafe429b20525b2c1798971d2e1">max_msg_size</a></td></tr>
<tr class="separator:a74403aafe429b20525b2c1798971d2e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Network targets allow logs to be sent over a network to a remote log collector or relay. There are a number of popular options for the remote end including Splunk, rsyslog, and syslog-ng. Network targets can send messages to these and others, over both IPv4 and IPv6, TCP and UDP.</p>
<p><b>Thread Safety: MT-Safe</b> Logging to network targets is thread safe by virtue of using the network logging functions which are thread safe themselves.</p>
<p><b>Async Signal Safety: AS-Unsafe lock</b> Logging to network targets is not signal safe, as a non-reentrant lock is used to coordinate the read of the entry with other potential accesses.</p>
<p><b>Async Cancel Safety: AC-Unsafe lock</b> Logging to network targets is not safe to call from threads that may be asynchronously cancelled, as the cleanup of the lock used for entries may not be completed. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a9cfd99b618e5ad004238bc53312fa99f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cfd99b618e5ad004238bc53312fa99f">&#9670;&nbsp;</a></span>STUMPLESS_DEFAULT_TRANSPORT_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STUMPLESS_DEFAULT_TRANSPORT_PORT&#160;&#160;&#160;&quot;514&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The default transport port for network targets. </p>
<p>This is based largely on tradition, but some applications may expect a different port (for example 1514 and 6514 are sometimes used). If a different port is needed on a target, use stumpless_set_transport_port() to change it. </p>

</div>
</div>
<a id="a35bad08139ade7d69c5d8478f873dfe0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35bad08139ade7d69c5d8478f873dfe0">&#9670;&nbsp;</a></span>STUMPLESS_DEFAULT_UDP_MAX_MESSAGE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STUMPLESS_DEFAULT_UDP_MAX_MESSAGE_SIZE&#160;&#160;&#160;1472</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The default message size for UDP network targets. </p>
<p>This is set to account for an MTU of 1500 bytes, a 20 byte IP header, and an 8 byte datagram header. If you wish to change this value for a particular target, then you must use the stumpless_set_udp_max_message_size() function on the target. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aac7323b660364d807b15ec5f77c634d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac7323b660364d807b15ec5f77c634d5">&#9670;&nbsp;</a></span>stumpless_network_protocol</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="network_8h.html#aac7323b660364d807b15ec5f77c634d5">stumpless_network_protocol</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Network protocols used by a network target. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aac7323b660364d807b15ec5f77c634d5abda7df19a6350479796ad58f3089ff98"></a>STUMPLESS_IPV4_NETWORK_PROTOCOL&#160;</td><td class="fielddoc"><p>Internet Protocol version 4, RFC 791. </p>
</td></tr>
<tr><td class="fieldname"><a id="aac7323b660364d807b15ec5f77c634d5a41aae8b58394254233524a216bcad168"></a>STUMPLESS_IPV6_NETWORK_PROTOCOL&#160;</td><td class="fielddoc"><p>Internet Protocl version 6, RFC 8200. </p>
</td></tr>
</table>

</div>
</div>
<a id="a1929406669805344dbc128bad24455c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1929406669805344dbc128bad24455c5">&#9670;&nbsp;</a></span>stumpless_transport_protocol</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="network_8h.html#a1929406669805344dbc128bad24455c5">stumpless_transport_protocol</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transport protocols used by a network target. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a1929406669805344dbc128bad24455c5ab7fcb1873a89fde5c42f21e245bc6a73"></a>STUMPLESS_TCP_TRANSPORT_PROTOCOL&#160;</td><td class="fielddoc"><p>TCP, RFC 793. </p>
</td></tr>
<tr><td class="fieldname"><a id="a1929406669805344dbc128bad24455c5a1c8c77b76b6fbe8af878db07295e983d"></a>STUMPLESS_UDP_TRANSPORT_PROTOCOL&#160;</td><td class="fielddoc"><p>UDP, RFC 768. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5f06b9d0d975b7b42d98d243b9ca2883"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f06b9d0d975b7b42d98d243b9ca2883">&#9670;&nbsp;</a></span>__attribute__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__attribute__ </td>
          <td>(</td>
          <td class="paramtype">(visibility(&quot;default&quot;))&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes a network target. </p>
<p>Gets the string representation of the given severity.</p>
<p>Gets the string representation of the given facility.</p>
<p>Retrieves the error encountered by the last library call.</p>
<p>Gets the transport protocol of a network target.</p>
<p>Gets the network protocol of a network target.</p>
<p>Sets the maximum message size of a UDP network target.</p>
<p>Sets the transport port number of a network target.</p>
<p>Sets the destination of a network target.</p>
<p>Opens a network target for remote logging over IPv6 and UDP.</p>
<p>Opens a network target for remote logging over IPv4 and UDP.</p>
<p>Opens a network target for remote logging over IPv6 and TCP.</p>
<p>Opens a network target for remote logging over IPv4 and TCP.</p>
<p>Opens a network target.</p>
<p>Creates a network target for logging over IPv6 and UDP, but does not open it.</p>
<p>Creates a network target for logging over IPv4 and UDP, but does not open it.</p>
<p>Creates a network target for logging over IPv6 and TCP, but does not open it.</p>
<p>Creates a network target for logging over IPv4 and TCP, but does not open it.</p>
<p>Creates a network target, but does not open it.</p>
<p>Gets the current maximum message size of a UDP network target.</p>
<p>Gets the transport port number of a network target.</p>
<p>Gets the destination of a network target.</p>
<p>This function closes the network connection associated with the target before destruction. It also destroys all memory allocated for the target, including the target struct itself.</p>
<p><b>Thread Safety: MT-Unsafe</b> This function is not thread safe as it destroys resources that other threads would use if they tried to reference this target.</p>
<p><b>Async Signal Safety: AS-Unsafe lock heap</b> This function is not safe to call from signal handlers due to the destruction of a lock that may be in use as well as the use of the memory deallocation function to release memory.</p>
<p><b>Async Cancel Safety: AC-Unsafe lock heap</b> This function is not safe to call from threads that may be asynchronously cancelled, as the cleanup of the lock may not be completed, and the memory deallocation function may not be AC-Safe itself.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The network target to close.</td></tr>
  </table>
  </dd>
</dl>
<p>The character buffer returned must be freed by the caller when it is no longer needed to avoid memory leaks.</p>
<p>If the network target has been created but not had a destination set yet, the result will be NULL.</p>
<p>In versions prior to v2.0.0, the returned pointer was to the internal buffer used to store the destination and was not to be modified by the caller. This behavior changed in v2.0.0 in order to avoid thread safety issues.</p>
<p><b>Thread Safety: MT-Safe</b> This function is thread safe. A mutex is used to coordinate the read of the target with other accesses and modifications.</p>
<p><b>Async Signal Safety: AS-Unsafe lock heap</b> This function is not safe to call from signal handlers due to the use of a non-reentrant lock to coordinate access and the use of memory management functions to create the result.</p>
<p><b>Async Cancel Safety: AC-Unsafe lock heap</b> This function is not safe to call from threads that may be asynchronously cancelled, due to the use of a lock that could be left locked as well as memory management functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The target to get the destination from.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current destination of the network target, or NULL if one has not yet been set. In the event of an error, NULL is returned and an error code is set appropriately.</dd></dl>
<p>The character buffer returned must be freed by the caller when it is no longer needed to avoid memory leaks.</p>
<p>If the network target has been created but not had a destination set yet, the result will be a string holding the same string as in STUMPLESS_DEFAULT_TRANSPORT_PORT.</p>
<p><b>Thread Safety: MT-Safe</b> This function is thread safe. A mutex is used to coordinate the read of the target with other accesses and modifications.</p>
<p><b>Async Signal Safety: AS-Unsafe lock heap</b> This function is not safe to call from signal handlers due to the use of a non-reentrant lock to coordinate access and the use of memory management functions to create the result.</p>
<p><b>Async Cancel Safety: AC-Unsafe lock heap</b> This function is not safe to call from threads that may be asynchronously cancelled, due to the use of a lock that could be left locked as well as memory management functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The target to get the port number from.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current port number of the network target, encoded as a NULL-terminated string. In the event of an error, NULL is returned and an error code is set appropriately.</dd></dl>
<p><b>Thread Safety: MT-Safe</b> This function is thread safe. A mutex is used to coordinate access to the target with other accesses and modifications.</p>
<p><b>Async Signal Safety: AS-Unsafe lock</b> This function is not safe to call from signal handlers due to the use of a non-reentrant lock to coordinate access.</p>
<p><b>Async Cancel Safety: AC-Unsafe lock</b> This function is not safe to call from threads that may be asynchronously cancelled, due to the use of a lock that could be left locked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The target to get the message size from.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current maximum message size of the supplied target if no error is encountered. In the event of an error, 0 is returned and an error code is set appropriately.</dd></dl>
<p>A network target can be created with this function if the target needs to be created without initiating a network session. This also allows parameters that are not available in the open function to be set before initiating the session, instead of restarting the session on each change.</p>
<p>The target will stay in a paused state until it is opened using the stumpless_open_target function.</p>
<p><b>Thread Safety: MT-Safe race:name</b> This function is thread safe, of course assuming that name is not modified by any other threads during execution.</p>
<p><b>Async Signal Safety: AS-Unsafe heap</b> This function is not safe to call from signal handlers due to the use of memory allocation functions.</p>
<p><b>Async Cancel Safety: AC-Unsafe heap</b> This function is not safe to call from threads that may be asynchronously cancelled, as the memory allocation function may not be AC-Safe itself.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the target to open. This is only used for identification of the target.</td></tr>
    <tr><td class="paramname">network</td><td>The network protocol to use.</td></tr>
    <tr><td class="paramname">transport</td><td>The transport protocol to use.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new target if no error is encountered. In the event of an error, NULL is returned and an error code is set appropriately.</dd></dl>
<p>A network target can be created with this function if the target needs to be created without initiating a network session. This also allows parameters that are not available in the open function to be set before initiating the session, instead of restarting the session on each change.</p>
<p>The target will stay in a paused state until it is opened using the stumpless_open_target function.</p>
<p><b>Thread Safety: MT-Safe race:name</b> This function is thread safe, of course assuming that name is not modified by any other threads during execution.</p>
<p><b>Async Signal Safety: AS-Unsafe heap</b> This function is not safe to call from signal handlers due to the use of memory allocation functions.</p>
<p><b>Async Cancel Safety: AC-Unsafe heap</b> This function is not safe to call from threads that may be asynchronously cancelled, as the memory allocation function may not be AC-Safe itself.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the target to open. This is only used for identification of the target.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new target if no error is encountered. In the event of an error, NULL is returned and an error code is set appropriately.</dd></dl>
<p>Network targets allow traditional syslog messages to be sent to a remote server. This function allows the type of network target to be specified by parameters, but if you know that you want a specific type then it is easier to use the simplified functions that specify the type by name, such as the stumpless_open_udp4_target function.</p>
<p><b>Thread Safety: MT-Safe race:name race:destination</b> This function is thread safe, of course assuming that name and destination are not modified by any other threads during execution.</p>
<p><b>Async Signal Safety: AS-Unsafe heap</b> This function is not safe to call from signal handlers due to the use of memory allocation functions.</p>
<p><b>Async Cancel Safety: AC-Unsafe heap</b> This function is not safe to call from threads that may be asynchronously cancelled, as the memory allocation function may not be AC-Safe itself.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the target to open. This is only used for identification of the target.</td></tr>
    <tr><td class="paramname">destination</td><td>The destination to send the messages to. This could be a hostname or an IP address.</td></tr>
    <tr><td class="paramname">network</td><td>The network protocol to use.</td></tr>
    <tr><td class="paramname">transport</td><td>The transport protocol to use.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The opened target if no error is encountered. In the event of an error, NULL is returned and an error code is set appropriately.</dd></dl>
<p>A TCP4 target will use Syslog over TCP, as defined in RFC 6587. Note that this includes the use of octet counting for transmission of messages, instead of a delimiter such as a newline character.</p>
<p><b>Thread Safety: MT-Safe race:name race:destination</b> This function is thread safe, of course assuming that name and destination is not modified by any other threads during execution.</p>
<p><b>Async Signal Safety: AS-Unsafe heap</b> This function is not safe to call from signal handlers due to the use of memory allocation functions.</p>
<p><b>Async Cancel Safety: AC-Unsafe heap</b> This function is not safe to call from threads that may be asynchronously cancelled, as the memory allocation function may not be AC-Safe itself.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the target to open. This is only used for identification of the target.</td></tr>
    <tr><td class="paramname">destination</td><td>The destination to send the messages to. This could be a hostname or an IP address.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The opened target if no error is encountered. In the event of an error, NULL is returned and an error code is set appropriately.</dd></dl>
<p>A TCP6 target will use Syslog over TCP, as defined in RFC 6587. Note that this includes the use of octet counting for transmission of messages, instead of a delimiter such as a newline character.</p>
<p><b>Thread Safety: MT-Safe race:name race:destination</b> This function is thread safe, of course assuming that name and destination is not modified by any other threads during execution.</p>
<p><b>Async Signal Safety: AS-Unsafe heap</b> This function is not safe to call from signal handlers due to the use of memory allocation functions.</p>
<p><b>Async Cancel Safety: AC-Unsafe heap</b> This function is not safe to call from threads that may be asynchronously cancelled, as the memory allocation function may not be AC-Safe itself.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the target to open. This is only used for identification of the target.</td></tr>
    <tr><td class="paramname">destination</td><td>The destination to send the messages to. This could be a hostname or an IP address.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The opened target if no error is encountered. In the event of an error, NULL is returned and an error code is set appropriately.</dd></dl>
<p>A UDP4 target will use Syslog over UDP, as defined in RFC 5426.</p>
<p><b>Thread Safety: MT-Safe race:name race:destination</b> This function is thread safe, of course assuming that name and destination is not modified by any other threads during execution.</p>
<p><b>Async Signal Safety: AS-Unsafe heap</b> This function is not safe to call from signal handlers due to the use of memory allocation functions.</p>
<p><b>Async Cancel Safety: AC-Unsafe heap</b> This function is not safe to call from threads that may be asynchronously cancelled, as the memory allocation function may not be AC-Safe itself.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the target to open. This is only used for identification of the target.</td></tr>
    <tr><td class="paramname">destination</td><td>The destination to send the messages to. This could be a hostname or an IP address.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The opened target if no error is encountered. In the event of an error, NULL is returned and an error code is set appropriately.</dd></dl>
<p>A UDP6 target will use Syslog over UDP, as defined in RFC 5426.</p>
<p><b>Thread Safety: MT-Safe race:name race:destination</b> This function is thread safe, of course assuming that name and destination is not modified by any other threads during execution.</p>
<p><b>Async Signal Safety: AS-Unsafe heap</b> This function is not safe to call from signal handlers due to the use of memory allocation functions.</p>
<p><b>Async Cancel Safety: AC-Unsafe heap</b> This function is not safe to call from threads that may be asynchronously cancelled, as the memory allocation function may not be AC-Safe itself.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the target to open. This is only used for identification of the target.</td></tr>
    <tr><td class="paramname">destination</td><td>The destination to send the messages to. This could be a hostname or an IP address.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The opened target if no error is encountered. In the event of an error, NULL is returned and an error code is set appropriately.</dd></dl>
<p>If the target is already open when this function is called, then it will attempt to re-open the target after the destination is changed. If the target is in a paused state, then it will be left that way until an explicit call to stumpless_open_target is made.</p>
<p>Note that if the target cannot be re-opened, this will not be treated as an error condition. That is, the returned value will still be the target, and the destination will reflect the new value. Versions prior to 2.0.0 treated this as an error condition and returned NULL despite the destination being updated successfully.</p>
<p><b>Thread Safety: MT-Safe race:destination</b> This function is thread safe, of course assuming that the destination string is not changed by any other threads during execution. A mutex is used to coordinate changes to the target while it is being modified.</p>
<p><b>Async Signal Safety: AS-Unsafe lock heap</b> This function is not safe to call from signal handlers due to the use of a non-reentrant lock to coordinate changes and the use of memory management functions to create the new destination and free the old one.</p>
<p><b>Async Cancel Safety: AC-Unsafe lock heap</b> This function is not safe to call from threads that may be asynchronously cancelled, due to the use of a lock that could be left locked as well as memory management functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The target to be modified.</td></tr>
    <tr><td class="paramname">destination</td><td>The new destintion to send messages to. This could be a hostname or an IP address.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The modified target if no error is encountered. In the event of an error, NULL is returned and an error code is set appropriately.</dd></dl>
<p>No validation is performed on the provided port number. The string can even contain non-numerical characters, and the target will be updated with the provided string. However, the target may not be able to successfully open if the port is invalid.</p>
<p>If the target is already open when this function is called, then it will attempt to re-open the target after the port is changed. If the target is in a paused state, then it will be left that way until an explicit call to stumpless_open_target is made.</p>
<p>Note that if the target cannot be re-opened, this will not be treated as an error condition. That is, the returned value will still be the target, and the port will reflect the new value. Versions prior to 2.0.0 treated this as an error condition and returned NULL despite the port being updated successfully.</p>
<p><b>Thread Safety: MT-Safe race:port</b> This function is thread safe, of course assuming that the port string is not changed by any other threads during execution. A mutex is used to coordinate changes to the target while it is being modified.</p>
<p><b>Async Signal Safety: AS-Unsafe lock heap</b> This function is not safe to call from signal handlers due to the use of a non-reentrant lock to coordinate changes and the use of memory management functions to create the new destination and free the old one.</p>
<p><b>Async Cancel Safety: AC-Unsafe lock heap</b> This function is not safe to call from threads that may be asynchronously cancelled, due to the use of a lock that could be left locked as well as memory management functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The target to be modified.</td></tr>
    <tr><td class="paramname">port</td><td>The new transport port number to use. This is an ASCII string, and will be copied by the function. After the call returns, the parameter will not be referenced again and can be destroyed as needed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The modified target if no error is encountered. In the event of an error, NULL is returned and an error code is set appropriately.</dd></dl>
<p>Messages that are longer than the maximum size are truncated to this length. If the underlying transport for a network target can support a larger datagram and you need support for longer messages, then you can use this option to increase the size. Likewise, the option can be used to force smaller datagrams if needed, for example in the case of extra overhead in the IP header beyond the typical 20 bytes.</p>
<p>Note that truncations due to the maximum size do not take UTF characters into account. If you have entries using multi-byte characters, then you need to be sure that these truncations do not cause parsing or security problems.</p>
<p>Without calling this function, UDP targets start with a maximum message size set to <code>STUMPLESS_DEFAULT_UDP_MAX_MESSAGE_SIZE</code>.</p>
<p><b>Thread Safety: MT-Safe</b> This function is thread safe. A mutex is used to coordinate changes to the target while it is being modified.</p>
<p><b>Async Signal Safety: AS-Unsafe lock</b> This function is not safe to call from signal handlers due to the use of a non-reentrant lock to coordinate changes.</p>
<p><b>Async Cancel Safety: AC-Unsafe lock</b> This function is not safe to call from threads that may be asynchronously cancelled, due to the use of a lock that could be left locked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The target to be modified.</td></tr>
    <tr><td class="paramname">max_msg_size</td><td>The new maximum message size for the supplied target.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The modified target if no error is encountered. In the event of an error, NULL is returned and an error code is set appropriately.</dd></dl>
<p><b>Thread Safety: MT-Safe</b> This function is thread safe. A mutex is used to coordinate the read of the target with other accesses and modifications.</p>
<p><b>Async Signal Safety: AS-Unsafe lock heap</b> This function is not safe to call from signal handlers due to the use of a non-reentrant lock to coordinate access.</p>
<p><b>Async Cancel Safety: AC-Unsafe lock heap</b> This function is not safe to call from threads that may be asynchronously cancelled, due to the use of a lock that could be left locked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The target to get the network protocol from.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The network protocol of the network target. In the event of an error, -1 is returned and an error code is set appropriately.</dd></dl>
<p><b>Thread Safety: MT-Safe</b> This function is thread safe. A mutex is used to coordinate the read of the target with other accesses and modifications.</p>
<p><b>Async Signal Safety: AS-Unsafe lock heap</b> This function is not safe to call from signal handlers due to the use of a non-reentrant lock to coordinate access.</p>
<p><b>Async Cancel Safety: AC-Unsafe lock heap</b> This function is not safe to call from threads that may be asynchronously cancelled, due to the use of a lock that could be left locked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The target to get the transport protocol from.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The transport protocol of the network target. In the event of an error, -1 is returned and an error code is set appropriately. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a85ec2713f151aae36f5bb52e65bac06d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85ec2713f151aae36f5bb52e65bac06d">&#9670;&nbsp;</a></span>destination</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* destination</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a74403aafe429b20525b2c1798971d2e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74403aafe429b20525b2c1798971d2e1">&#9670;&nbsp;</a></span>max_msg_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="memory_8h.html#a1de1ad716e56455dd12745e3f014b642">size_t</a> max_msg_size</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad723da1801ae1586eb330380e2d9a912"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad723da1801ae1586eb330380e2d9a912">&#9670;&nbsp;</a></span>port</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* port</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab0336df654a1920185f82879e510fc18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0336df654a1920185f82879e510fc18">&#9670;&nbsp;</a></span>transport</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char enum <a class="el" href="network_8h.html#aac7323b660364d807b15ec5f77c634d5">stumpless_network_protocol</a> network enum <a class="el" href="network_8h.html#a1929406669805344dbc128bad24455c5">stumpless_transport_protocol</a> transport</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 10 2022 21:47:45 for stumpless by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.19
</small></address>
</body>
</html>
